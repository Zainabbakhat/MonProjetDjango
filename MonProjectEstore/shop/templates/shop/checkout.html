{% extends "shop/base.html" %}

{% block content %} 

<style>
  #item-list {
    margin-top: 20px;
  }
  
  .list-group-item {
    margin-bottom: 10px; 
    background-color: #f8f9fa; 
    border-color: #dee2e6;
    border-radius: 5px; 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); 
    padding: 10px 15px; 
  }
  
  .list-group-item span {
    font-size: 14px; 
  }
  
  
  .list-group-item .badge-warning {
   background-color: #ffc107;
    color: #212529; 
  }
  
  .list-group-item .badge-primary {
    background-color: #007bff; 
    color: #fff; 
  }
  .btn-commander {
    background: linear-gradient(to right, #714cef, #9d6afe);

    border: none;
   
    color: #fff;
   
}

  
 

  </style>


<div class="row">
    <div class="col-md-12">
        <ul class="list-group" id="item-list">
            <h3 class="text-center ">Voici votre liste</h3>
           
           
        </ul>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" id="items", name="items" value="{{ items }}">
            <input type="hidden" id="total" name="total" value="{{ total }}">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputEmail4">Nom</label>
                <input type="text" id="nom" name="nom" class="form-control" id="inputEmail4" placeholder="entrez votre nom">
              </div>
              <div class="form-group col-md-6">
                <label for="inputPassword4">Email</label>
                <input type="email" id="email" name="email" class="form-control" id="inputPassword4" placeholder="hjhsgygdh@gmail.com">
              </div>
            </div>
            <div class="form-group">
              <label for="inputAdresse">Adresse</label>
              <input type="text" id="adresse" name="adresse" class="form-control" id="inputAddresse" placeholder="entrez votre adresse">
            </div>
            
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputCity">Ville</label>
                <input type="text" name="ville" id="ville" class="form-control" id="inputCity">
              </div>
              <div class="form-group col-md-4">
                <label for="inputState">Pays</label>
                  <select id="pays" name="pays" class="form-control">
                    <option selected>Maroc</option>
                    <option value="Afghanistan">Afghanistan</option>
                    <option value="Afrique du Sud">Afrique du Sud</option>
                    <option value="Albanie">Albanie</option>
                    <option value="Algérie">Algérie</option>
                    <option value="Allemagne">Allemagne</option>
                    <option value="Andorre">Andorre</option>
                    <option value="Angola">Angola</option>
                    <option value="Antigua-et-Barbuda">Antigua-et-Barbuda</option>
                    <option value="Arabie Saoudite">Arabie Saoudite</option>
                    <option value="Argentine">Argentine</option>
                    <option value="Arménie">Arménie</option>
                    <option value="Australie">Australie</option>
                    <option value="Autriche">Autriche</option>
                    <option value="Azerbaïdjan">Azerbaïdjan</option>
                    <option value="Bahamas">Bahamas</option>
                    <option value="Bahreïn">Bahreïn</option>
                    <option value="Bangladesh">Bangladesh</option>
                    <option value="Barbade">Barbade</option>
                    <option value="Belgique">Belgique</option>
                    <option value="Belize">Belize</option>
                    <option value="Bénin">Bénin</option>
                    <option value="Bhoutan">Bhoutan</option>
                    <option value="Biélorussie">Biélorussie</option>
                    <option value="Birmanie">Birmanie</option>
                    <option value="Bolivie">Bolivie</option>
                    <option value="Bosnie-Herzégovine">Bosnie-Herzégovine</option>
                    <option value="Botswana">Botswana</option>
                    <option value="Brésil">Brésil</option>
                    <option value="Brunei">Brunei</option>
                    <option value="Bulgarie">Bulgarie</option>
                    <option value="Burkina">Burkina</option>
                    <option value="Burundi">Burundi</option>
                    <option value="Cambodge">Cambodge</option>
                    <option value="Cameroun">Cameroun</option>
                    <option value="Canada">Canada</option>
                    <option value="Cap-Vert">Cap-Vert</option>
                    <option value="Chili">Chili</option>
                    <option value="Chine">Chine</option>
                    <option value="Chypre">Chypre</option>
                    <option value="Colombie">Colombie</option>
                    <option value="Comores">Comores</option>
                    <option value="Congo">Congo</option>
                    <option value="Congo Democratic Republic">Congo Democratic Republic</option>
                    <option value="Corée du Nord">Corée du Nord</option>
                    <option value="Corée du Sud">Corée du Sud</option>
                    <option value="Costa Rica">Costa Rica</option>
                    <option value="Côte d'Ivoire">Côte d'Ivoire</option>
                    <option value="Croatie">Croatie</option>
                    <option value="Cuba">Cuba</option>
                    <option value="Danemark">Danemark</option>
                    <option value="Djibouti">Djibouti</option>
                    <option value="Dominique">Dominique</option>
                    <option value="Égypte">Égypte</option>
                    <option value="Émirats arabes unis">Émirats arabes unis</option>
                    <option value="Équateur">Équateur</option>
                    <option value="Érythrée">Érythrée</option>
                    <option value="Espagne">Espagne</option>
                    <option value="Estonie">Estonie</option>
                    <option value="États-Unis">États-Unis</option>
                    <option value="Éthiopie">Éthiopie</option>
                    <option value="Fidji">Fidji</option>
                    <option value="Finlande">Finlande</option>
                    <option value="France">France</option>
                    <option value="Gabon">Gabon</option>
                    <option value="Gambie">Gambie</option>
                    <option value="Géorgie">Géorgie</option>
                    <option value="Ghana">Ghana</option>
                    <option value="Grèce">Grèce</option>
                    <option value="Grenade">Grenade</option>
                    <option value="Guatemala">Guatemala</option>
                    <option value="Guinée">Guinée</option>
                    <option value="Guinée équatoriale">Guinée équatoriale</option>
                    <option value="Guinée-Bissau">Guinée-Bissau</option>
                    <option value="Guyana">Guyana</option>
                    <option value="Haïti">Haïti</option>
                    <option value="Honduras">Honduras</option>
                    <option value="Hongrie">Hongrie</option>
                    <option value="Inde">Inde</option>
                    <option value="Indonésie">Indonésie</option>
                    <option value="Irak">Irak</option>
                    <option value="Iran">Iran</option>
                    <option value="Irlande">Irlande</option>
                    <option value="Islande">Islande</option>
                    <option value="Israël">Israël</option>
                    <option value="Italie">Italie</option>
                    <option value="Jamaïque">Jamaïque</option>
                    <option value="Japon">Japon</option>
                    <option value="Jordanie">Jordanie</option>
                    <option value="Kazakhstan">Kazakhstan</option>
                    <option value="Kenya">Kenya</option>
                    <option value="Kirghizistan">Kirghizistan</option>
                    <option value="Kiribati">Kiribati</option>
                    <option value="Koweït">Koweït</option>
                    <option value="Laos">Laos</option>
                    <option value="Lesotho">Lesotho</option>
                    <option value="Lettonie">Lettonie</option>
                    <option value="Liban">Liban</option>
                    <option value="Liban">Liban</option>
                    <option value="Liban">Liban</option>
                    <option value="Libéria">Libéria</option>
                    <option value="Libye">Libye</option>
                    <option value="Liechtenstein">Liechtenstein</option>
                    <option value="Lituanie">Lituanie</option>
                    <option value="Luxembourg">Luxembourg</option>
                    <option value="Macédoine">Macédoine</option>
                    <option value="Madagascar">Madagascar</option>
                    <option value="Malaisie">Malaisie</option>
                    <option value="Malawi">Malawi</option>
                    <option value="Maldives">Maldives</option>
                    <option value="Mali">Mali</option>
                    <option value="Malte">Malte</option>
                    <option value="Maroc">Maroc</option>
                  </select>
                </div>
                   <div class="form-group col-md-2">
                   <label for="inputZip">Adresse</label>
                   <input name="zipcode" id="zipcode" type="text" class="form-control">
                  </div>
                </div>
            <div class="form-group col-md-2">
              <label for="inputZip">Somme total a payer </label>
              <input name="total" id="total-display" type="readonly" class=" bg-dark text-warning form-control" >
            </div>
          </div>
            <div class="form-group">

            <button type="button" id="livraison-btn" class="btn btn-secondary">Livraison a domicile</button>
            <button type="submit" class="btn btn-primary btn-commander">Commander</button>
          </form>
    </div>
</div>


{% endblock %}
{% block js %}
    <script type="text/javascript">
        if(localStorage.getItem('panier')==null){
            var panier =  {};

        }else{
            panier = JSON.parse(localStorage.getItem('panier'));
        }
        var total = 0;
        var nombre = 0;
        for(item in panier){
            let nom = panier[item][1];
            let quantite = panier[item][0];
            let prix = panier[item][2];
            nombre += quantite;
            total += prix;
            let itemString = ` <li class="list-group-item d-flex justify-content-between align-items-center">
              ${nom}
              <span class="badge badge-primary badge-pill"> QTE: ${quantite}</span>
              <span class="badge badge-warning badge-pill">$ ${prix}</span>
            </li>`;
            $('#item-list').append(itemString);
        }
        let itemNombre = ` <li class="list-group-item d-flex justify-content-between align-items-center">
              <b class="bg-danger ">PRIX ET QUANTITE TOTAL</b>
              <span class="badge badge-danger badge-pill"> TQTE: ${nombre}</span>
              <span class="badge badge-danger badge-pill">$ ${total}</span>
            </li>`;
            $('#item-list').append(itemNombre);
            $('#total-display').val("$"+total);


        $('#items').val(JSON.stringify(panier));
        
         const livraisonBtn = document.getElementById('livraison-btn');
         livraisonBtn.addEventListener('click', () => {
          const total = parseFloat(document.getElementById('total-display').value.replace('$', ''));
          const nouveauTotal = total + 50;
          document.getElementById('total-display').value = '$' + nouveauTotal;
          document.getElementById('total').value = nouveauTotal;
        });

    </script>
{% endblock %}
     

            
   

